# Generated by Django 6.0.1 on 2026-01-21 13:56

import django.core.validators
import django.db.models.deletion
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='CoachType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='coach type')),
                ('coach_class', models.CharField(choices=[('FIRST_AC', 'First AC'), ('SECOND_AC', 'Second AC'), ('THIRD_AC', 'Third AC'), ('AC_CHAIR', 'AC Chair Car'), ('SLEEPER', 'Sleeper'), ('SECOND_SEATING', 'Second Seating'), ('GENERAL', 'General')], max_length=20, unique=True, verbose_name='coach class')),
                ('description', models.TextField(blank=True, verbose_name='description')),
                ('seat_layout', models.JSONField(default=list, help_text='JSON array representing seat layout per coach', verbose_name='seat layout')),
                ('total_seats', models.PositiveIntegerField(default=72, verbose_name='total seats per coach')),
                ('base_fare_per_km', models.DecimalField(decimal_places=4, default=0.5, max_digits=8, verbose_name='base fare per km')),
                ('reservation_charge', models.DecimalField(decimal_places=2, default=20.0, max_digits=10, verbose_name='reservation charge')),
                ('superfast_charge', models.DecimalField(decimal_places=2, default=30.0, max_digits=10, verbose_name='superfast charge')),
                ('service_tax_percentage', models.DecimalField(decimal_places=2, default=5.0, max_digits=5, verbose_name='service tax percentage')),
            ],
            options={
                'verbose_name': 'Coach Type',
                'verbose_name_plural': 'Coach Types',
                'ordering': ['coach_class'],
            },
        ),
        migrations.CreateModel(
            name='TrainReview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rating', models.IntegerField(choices=[(1, '★'), (2, '★★'), (3, '★★★'), (4, '★★★★'), (5, '★★★★★')], verbose_name='rating')),
                ('title', models.CharField(max_length=200, verbose_name='review title')),
                ('comment', models.TextField(verbose_name='comment')),
                ('cleanliness', models.PositiveIntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='cleanliness')),
                ('comfort', models.PositiveIntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='comfort')),
                ('punctuality', models.PositiveIntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='punctuality')),
                ('staff_behavior', models.PositiveIntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='staff behavior')),
                ('food_quality', models.PositiveIntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='food quality')),
                ('value_for_money', models.PositiveIntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='value for money')),
                ('is_verified', models.BooleanField(default=False, verbose_name='verified review')),
                ('helpful_count', models.PositiveIntegerField(default=0, verbose_name='helpful count')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Train Review',
                'verbose_name_plural': 'Train Reviews',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='TrainStop',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('station_name', models.CharField(max_length=200, verbose_name='station name')),
                ('station_code', models.CharField(max_length=10, verbose_name='station code')),
                ('arrival_time', models.TimeField(blank=True, null=True, verbose_name='arrival time')),
                ('departure_time', models.TimeField(blank=True, null=True, verbose_name='departure time')),
                ('halt_minutes', models.PositiveIntegerField(default=2, verbose_name='halt minutes')),
                ('distance_from_source', models.PositiveIntegerField(verbose_name='distance from source (km)')),
                ('day_number', models.PositiveIntegerField(default=1, verbose_name='day number')),
                ('sequence', models.PositiveIntegerField(verbose_name='sequence')),
            ],
            options={
                'verbose_name': 'Train Stop',
                'verbose_name_plural': 'Train Stops',
                'ordering': ['train', 'sequence'],
            },
        ),
        migrations.CreateModel(
            name='Coach',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('coach_number', models.CharField(max_length=10, verbose_name='coach number')),
                ('coach_position', models.PositiveIntegerField(help_text='Position in train', verbose_name='coach position')),
                ('total_seats', models.PositiveIntegerField(verbose_name='total seats')),
                ('available_seats', models.PositiveIntegerField(default=0, verbose_name='available seats')),
                ('has_charging', models.BooleanField(default=False, verbose_name='has charging')),
                ('has_led_display', models.BooleanField(default=True, verbose_name='has LED display')),
                ('is_ladies_coach', models.BooleanField(default=False, verbose_name='ladies coach')),
                ('is_senior_citizen_coach', models.BooleanField(default=False, verbose_name='senior citizen coach')),
                ('is_handicapped_friendly', models.BooleanField(default=False, verbose_name='handicapped friendly')),
                ('status', models.CharField(choices=[('AVAILABLE', 'Available'), ('MAINTENANCE', 'Under Maintenance'), ('RESERVED', 'Reserved for Special Train')], default='AVAILABLE', max_length=20, verbose_name='status')),
                ('coach_type', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='coaches', to='trains.coachtype')),
            ],
            options={
                'verbose_name': 'Coach',
                'verbose_name_plural': 'Coaches',
                'ordering': ['train', 'coach_position'],
            },
        ),
        migrations.CreateModel(
            name='FareRule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('from_date', models.DateField(verbose_name='effective from')),
                ('to_date', models.DateField(blank=True, null=True, verbose_name='effective to')),
                ('min_distance', models.PositiveIntegerField(default=0, verbose_name='minimum distance (km)')),
                ('max_distance', models.PositiveIntegerField(blank=True, null=True, verbose_name='maximum distance (km)')),
                ('fare_per_km', models.DecimalField(decimal_places=4, max_digits=8, verbose_name='fare per km')),
                ('coach_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fare_rules', to='trains.coachtype')),
            ],
            options={
                'verbose_name': 'Fare Rule',
                'verbose_name_plural': 'Fare Rules',
            },
        ),
        migrations.CreateModel(
            name='Seat',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('seat_number', models.CharField(max_length=10, verbose_name='seat number')),
                ('berth_type', models.CharField(choices=[('LOWER', 'Lower'), ('MIDDLE', 'Middle'), ('UPPER', 'Upper'), ('SIDE_LOWER', 'Side Lower'), ('SIDE_UPPER', 'Side Upper'), ('WINDOW', 'Window'), ('AISLE', 'Aisle')], default='LOWER', max_length=20, verbose_name='berth type')),
                ('seat_gender', models.CharField(choices=[('ANY', 'Any'), ('MALE', 'Male Only'), ('FEMALE', 'Female Only')], default='ANY', max_length=10, verbose_name='seat gender')),
                ('compartment_number', models.PositiveIntegerField(verbose_name='compartment number')),
                ('seat_position', models.PositiveIntegerField(verbose_name='seat position')),
                ('fare_adjustment', models.DecimalField(decimal_places=2, default=0.0, help_text='Additional amount for this seat (can be negative)', max_digits=10, verbose_name='fare adjustment')),
                ('is_booked', models.BooleanField(default=False, verbose_name='is booked')),
                ('is_blocked', models.BooleanField(default=False, verbose_name='is blocked')),
                ('block_reason', models.CharField(blank=True, max_length=200, verbose_name='block reason')),
                ('is_emergency_window', models.BooleanField(default=False, verbose_name='emergency window')),
                ('is_near_toilet', models.BooleanField(default=False, verbose_name='near toilet')),
                ('is_near_door', models.BooleanField(default=False, verbose_name='near door')),
                ('coach', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='seats', to='trains.coach')),
            ],
            options={
                'verbose_name': 'Seat',
                'verbose_name_plural': 'Seats',
                'ordering': ['coach', 'compartment_number', 'seat_position'],
            },
        ),
        migrations.CreateModel(
            name='Train',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('train_number', models.CharField(max_length=20, unique=True, verbose_name='train number')),
                ('train_name', models.CharField(max_length=200, verbose_name='train name')),
                ('train_type', models.CharField(choices=[('EXPRESS', 'Express'), ('MAIL', 'Mail'), ('SUPERFAST', 'Superfast'), ('RAJDHANI', 'Rajdhani'), ('SHATABDI', 'Shatabdi'), ('DURONTO', 'Duronto'), ('LOCAL', 'Local'), ('METRO', 'Metro')], default='EXPRESS', max_length=20, verbose_name='train type')),
                ('source_station', models.CharField(max_length=200, verbose_name='source station')),
                ('destination_station', models.CharField(max_length=200, verbose_name='destination station')),
                ('source_station_code', models.CharField(max_length=10, verbose_name='source code')),
                ('destination_station_code', models.CharField(max_length=10, verbose_name='destination code')),
                ('departure_time', models.TimeField(verbose_name='departure time')),
                ('arrival_time', models.TimeField(verbose_name='arrival time')),
                ('running_days', models.CharField(default='1111111', help_text="7 digits (Sun-Sat), 1=runs, 0=doesn't run", max_length=50, verbose_name='running days')),
                ('duration_hours', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='duration (hours)')),
                ('distance_km', models.PositiveIntegerField(blank=True, null=True, verbose_name='distance (km)')),
                ('total_coaches', models.PositiveIntegerField(default=20, verbose_name='total coaches')),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('INACTIVE', 'Inactive'), ('CANCELLED', 'Cancelled'), ('DIVERTED', 'Diverted')], default='ACTIVE', max_length=20, verbose_name='status')),
                ('has_pantry', models.BooleanField(default=False, verbose_name='has pantry car')),
                ('has_ac', models.BooleanField(default=True, verbose_name='has AC coaches')),
                ('avg_speed_kmph', models.PositiveIntegerField(blank=True, null=True, verbose_name='average speed (kmph)')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Train',
                'verbose_name_plural': 'Trains',
                'ordering': ['train_number'],
                'indexes': [models.Index(fields=['train_number', 'status'], name='trains_trai_train_n_3bb49d_idx'), models.Index(fields=['source_station', 'destination_station'], name='trains_trai_source__8df5dd_idx'), models.Index(fields=['train_type'], name='trains_trai_train_t_608869_idx')],
            },
        ),
        migrations.AddField(
            model_name='coach',
            name='train',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='coaches', to='trains.train'),
        ),
        migrations.CreateModel(
            name='TrainBooking',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('travel_date', models.DateField(verbose_name='travel date')),
                ('seats_booked', models.JSONField(default=list, help_text='List of seat numbers booked', verbose_name='seats booked')),
                ('total_passengers', models.PositiveIntegerField(default=1, verbose_name='total passengers')),
                ('quota', models.CharField(choices=[('GENERAL', 'General'), ('LADIES', 'Ladies'), ('SENIOR_CITIZEN', 'Senior Citizen'), ('TATKAL', 'Tatkal'), ('PREMIUM_TATKAL', 'Premium Tatkal'), ('FOREIGN_TOURIST', 'Foreign Tourist'), ('DIVYANG', 'Divyang (Disabled)')], default='GENERAL', max_length=20, verbose_name='quota')),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('CONFIRMED', 'Confirmed'), ('RAC', 'RAC (Reservation Against Cancellation)'), ('WAITLIST', 'Waitlisted'), ('CANCELLED', 'Cancelled'), ('NO_SHOW', 'No Show')], default='PENDING', max_length=20, verbose_name='status')),
                ('pnr_number', models.CharField(blank=True, max_length=10, unique=True, verbose_name='PNR number')),
                ('base_fare', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='base fare')),
                ('reservation_charge', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='reservation charge')),
                ('superfast_charge', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='superfast charge')),
                ('service_tax', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='service tax')),
                ('tatkal_charge', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='tatkal charge')),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='total amount')),
                ('passenger_name', models.CharField(max_length=200, verbose_name='passenger name')),
                ('passenger_age', models.PositiveIntegerField(verbose_name='passenger age')),
                ('passenger_gender', models.CharField(choices=[('MALE', 'Male'), ('FEMALE', 'Female'), ('OTHER', 'Other')], max_length=10, verbose_name='passenger gender')),
                ('passenger_id_type', models.CharField(choices=[('AADHAAR', 'Aadhaar'), ('PAN', 'PAN'), ('PASSPORT', 'Passport'), ('DRIVING_LICENSE', 'Driving License'), ('VOTER_ID', 'Voter ID')], default='AADHAAR', max_length=20, verbose_name='ID type')),
                ('passenger_id_number', models.CharField(max_length=50, verbose_name='ID number')),
                ('passenger_phone', models.CharField(max_length=20, verbose_name='passenger phone')),
                ('passenger_email', models.EmailField(blank=True, max_length=254, verbose_name='passenger email')),
                ('cancellation_reason', models.TextField(blank=True, verbose_name='cancellation reason')),
                ('cancellation_charge', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='cancellation charge')),
                ('cancellation_time', models.DateTimeField(blank=True, null=True, verbose_name='cancellation time')),
                ('booked_at', models.DateTimeField(auto_now_add=True, verbose_name='booked at')),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('coach_type', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='bookings', to='trains.coachtype')),
                ('train', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='bookings', to='trains.train')),
            ],
            options={
                'verbose_name': 'Train Booking',
                'verbose_name_plural': 'Train Bookings',
                'ordering': ['-booked_at'],
            },
        ),
    ]
